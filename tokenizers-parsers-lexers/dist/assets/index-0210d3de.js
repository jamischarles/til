(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function e(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerpolicy&&(n.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?n.credentials="include":s.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(s){if(s.ep)return;s.ep=!0;const n=e(s);fetch(s.href,n)}})();const qt=1024;let Jt=0;class Pt{constructor(t,e){this.from=t,this.to=e}}class S{constructor(t={}){this.id=Jt++,this.perNode=!!t.perNode,this.deserialize=t.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(t){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof t!="function"&&(t=D.match(t)),e=>{let i=t(e);return i===void 0?null:[this,i]}}}S.closedBy=new S({deserialize:l=>l.split(" ")});S.openedBy=new S({deserialize:l=>l.split(" ")});S.group=new S({deserialize:l=>l.split(" ")});S.contextHash=new S({perNode:!0});S.lookAhead=new S({perNode:!0});S.mounted=new S({perNode:!0});const Kt=Object.create(null);class D{constructor(t,e,i,s=0){this.name=t,this.props=e,this.id=i,this.flags=s}static define(t){let e=t.props&&t.props.length?Object.create(null):Kt,i=(t.top?1:0)|(t.skipped?2:0)|(t.error?4:0)|(t.name==null?8:0),s=new D(t.name||"",e,t.id,i);if(t.props){for(let n of t.props)if(Array.isArray(n)||(n=n(s)),n){if(n[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");e[n[0].id]=n[1]}}return s}prop(t){return this.props[t.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(t){if(typeof t=="string"){if(this.name==t)return!0;let e=this.prop(S.group);return e?e.indexOf(t)>-1:!1}return this.id==t}static match(t){let e=Object.create(null);for(let i in t)for(let s of i.split(" "))e[s]=t[i];return i=>{for(let s=i.prop(S.group),n=-1;n<(s?s.length:0);n++){let r=e[n<0?i.name:s[n]];if(r)return r}}}}D.none=new D("",Object.create(null),0,8);class Tt{constructor(t){this.types=t;for(let e=0;e<t.length;e++)if(t[e].id!=e)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...t){let e=[];for(let i of this.types){let s=null;for(let n of t){let r=n(i);r&&(s||(s=Object.assign({},i.props)),s[r[0].id]=r[1])}e.push(s?new D(i.name,s,i.id,i.flags):i)}return new Tt(e)}}const lt=new WeakMap,Mt=new WeakMap;var N;(function(l){l[l.ExcludeBuffers=1]="ExcludeBuffers",l[l.IncludeAnonymous=2]="IncludeAnonymous",l[l.IgnoreMounts=4]="IgnoreMounts",l[l.IgnoreOverlays=8]="IgnoreOverlays"})(N||(N={}));class T{constructor(t,e,i,s,n){if(this.type=t,this.children=e,this.positions=i,this.length=s,this.props=null,n&&n.length){this.props=Object.create(null);for(let[r,h]of n)this.props[typeof r=="number"?r:r.id]=h}}toString(){let t=this.prop(S.mounted);if(t&&!t.overlay)return t.tree.toString();let e="";for(let i of this.children){let s=i.toString();s&&(e&&(e+=","),e+=s)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(e.length?"("+e+")":""):e}cursor(t=0){return new kt(this.topNode,t)}cursorAt(t,e=0,i=0){let s=lt.get(this)||this.topNode,n=new kt(s);return n.moveTo(t,e),lt.set(this,n._tree),n}get topNode(){return new U(this,0,0,null)}resolve(t,e=0){let i=st(lt.get(this)||this.topNode,t,e,!1);return lt.set(this,i),i}resolveInner(t,e=0){let i=st(Mt.get(this)||this.topNode,t,e,!0);return Mt.set(this,i),i}iterate(t){let{enter:e,leave:i,from:s=0,to:n=this.length}=t;for(let r=this.cursor((t.mode||0)|N.IncludeAnonymous);;){let h=!1;if(r.from<=n&&r.to>=s&&(r.type.isAnonymous||e(r)!==!1)){if(r.firstChild())continue;h=!0}for(;h&&i&&!r.type.isAnonymous&&i(r),!r.nextSibling();){if(!r.parent())return;h=!0}}}prop(t){return t.perNode?this.props?this.props[t.id]:void 0:this.type.prop(t)}get propValues(){let t=[];if(this.props)for(let e in this.props)t.push([+e,this.props[e]]);return t}balance(t={}){return this.children.length<=8?this:It(D.none,this.children,this.positions,0,this.children.length,0,this.length,(e,i,s)=>new T(this.type,e,i,s,this.propValues),t.makeTree||((e,i,s)=>new T(D.none,e,i,s)))}static build(t){return ee(t)}}T.empty=new T(D.none,[],[],0);class zt{constructor(t,e){this.buffer=t,this.index=e}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new zt(this.buffer,this.index)}}class K{constructor(t,e,i){this.buffer=t,this.length=e,this.set=i}get type(){return D.none}toString(){let t=[];for(let e=0;e<this.buffer.length;)t.push(this.childString(e)),e=this.buffer[e+3];return t.join(",")}childString(t){let e=this.buffer[t],i=this.buffer[t+3],s=this.set.types[e],n=s.name;if(/\W/.test(n)&&!s.isError&&(n=JSON.stringify(n)),t+=4,i==t)return n;let r=[];for(;t<i;)r.push(this.childString(t)),t=this.buffer[t+3];return n+"("+r.join(",")+")"}findChild(t,e,i,s,n){let{buffer:r}=this,h=-1;for(let o=t;o!=e&&!(Ht(n,s,r[o+1],r[o+2])&&(h=o,i>0));o=r[o+3]);return h}slice(t,e,i){let s=this.buffer,n=new Uint16Array(e-t),r=0;for(let h=t,o=0;h<e;){n[o++]=s[h++],n[o++]=s[h++]-i;let a=n[o++]=s[h++]-i;n[o++]=s[h++]-t,r=Math.max(r,a)}return new K(n,r,this.set)}}function Ht(l,t,e,i){switch(l){case-2:return e<t;case-1:return i>=t&&e<t;case 0:return e<t&&i>t;case 1:return e<=t&&i>t;case 2:return i>t;case 4:return!0}}function Xt(l,t){let e=l.childBefore(t);for(;e;){let i=e.lastChild;if(!i||i.to!=e.to)break;i.type.isError&&i.from==i.to?(l=e,e=i.prevSibling):e=i}return l}function st(l,t,e,i){for(var s;l.from==l.to||(e<1?l.from>=t:l.from>t)||(e>-1?l.to<=t:l.to<t);){let r=!i&&l instanceof U&&l.index<0?null:l.parent;if(!r)return l;l=r}let n=i?0:N.IgnoreOverlays;if(i)for(let r=l,h=r.parent;h;r=h,h=r.parent)r instanceof U&&r.index<0&&((s=h.enter(t,e,n))===null||s===void 0?void 0:s.from)!=r.from&&(l=h);for(;;){let r=l.enter(t,e,n);if(!r)return l;l=r}}class U{constructor(t,e,i,s){this._tree=t,this.from=e,this.index=i,this._parent=s}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(t,e,i,s,n=0){for(let r=this;;){for(let{children:h,positions:o}=r._tree,a=e>0?h.length:-1;t!=a;t+=e){let c=h[t],u=o[t]+r.from;if(Ht(s,i,u,u+c.length)){if(c instanceof K){if(n&N.ExcludeBuffers)continue;let p=c.findChild(0,c.buffer.length,e,i-u,s);if(p>-1)return new X(new te(r,c,t,u),null,p)}else if(n&N.IncludeAnonymous||!c.type.isAnonymous||Rt(c)){let p;if(!(n&N.IgnoreMounts)&&c.props&&(p=c.prop(S.mounted))&&!p.overlay)return new U(p.tree,u,t,r);let g=new U(c,u,t,r);return n&N.IncludeAnonymous||!g.type.isAnonymous?g:g.nextChild(e<0?c.children.length-1:0,e,i,s)}}}if(n&N.IncludeAnonymous||!r.type.isAnonymous||(r.index>=0?t=r.index+e:t=e<0?-1:r._parent._tree.children.length,r=r._parent,!r))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(t){return this.nextChild(0,1,t,2)}childBefore(t){return this.nextChild(this._tree.children.length-1,-1,t,-2)}enter(t,e,i=0){let s;if(!(i&N.IgnoreOverlays)&&(s=this._tree.prop(S.mounted))&&s.overlay){let n=t-this.from;for(let{from:r,to:h}of s.overlay)if((e>0?r<=n:r<n)&&(e<0?h>=n:h>n))return new U(s.tree,s.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,t,e,i)}nextSignificantParent(){let t=this;for(;t.type.isAnonymous&&t._parent;)t=t._parent;return t}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(t=0){return new kt(this,t)}get tree(){return this._tree}toTree(){return this._tree}resolve(t,e=0){return st(this,t,e,!1)}resolveInner(t,e=0){return st(this,t,e,!0)}enterUnfinishedNodesBefore(t){return Xt(this,t)}getChild(t,e=null,i=null){let s=gt(this,t,e,i);return s.length?s[0]:null}getChildren(t,e=null,i=null){return gt(this,t,e,i)}toString(){return this._tree.toString()}get node(){return this}matchContext(t){return mt(this,t)}}function gt(l,t,e,i){let s=l.cursor(),n=[];if(!s.firstChild())return n;if(e!=null){for(;!s.type.is(e);)if(!s.nextSibling())return n}for(;;){if(i!=null&&s.type.is(i))return n;if(s.type.is(t)&&n.push(s.node),!s.nextSibling())return i==null?n:[]}}function mt(l,t,e=t.length-1){for(let i=l.parent;e>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(t[e]&&t[e]!=i.name)return!1;e--}}return!0}class te{constructor(t,e,i,s){this.parent=t,this.buffer=e,this.index=i,this.start=s}}class X{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(t,e,i){this.context=t,this._parent=e,this.index=i,this.type=t.buffer.set.types[t.buffer.buffer[i]]}child(t,e,i){let{buffer:s}=this.context,n=s.findChild(this.index+4,s.buffer[this.index+3],t,e-this.context.start,i);return n<0?null:new X(this.context,this,n)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(t){return this.child(1,t,2)}childBefore(t){return this.child(-1,t,-2)}enter(t,e,i=0){if(i&N.ExcludeBuffers)return null;let{buffer:s}=this.context,n=s.findChild(this.index+4,s.buffer[this.index+3],e>0?1:-1,t-this.context.start,e);return n<0?null:new X(this.context,this,n)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(t){return this._parent?null:this.context.parent.nextChild(this.context.index+t,t,0,4)}get nextSibling(){let{buffer:t}=this.context,e=t.buffer[this.index+3];return e<(this._parent?t.buffer[this._parent.index+3]:t.buffer.length)?new X(this.context,this._parent,e):this.externalSibling(1)}get prevSibling(){let{buffer:t}=this.context,e=this._parent?this._parent.index+4:0;return this.index==e?this.externalSibling(-1):new X(this.context,this._parent,t.findChild(e,this.index,-1,0,4))}cursor(t=0){return new kt(this,t)}get tree(){return null}toTree(){let t=[],e=[],{buffer:i}=this.context,s=this.index+4,n=i.buffer[this.index+3];if(n>s){let r=i.buffer[this.index+1];t.push(i.slice(s,n,r)),e.push(0)}return new T(this.type,t,e,this.to-this.from)}resolve(t,e=0){return st(this,t,e,!1)}resolveInner(t,e=0){return st(this,t,e,!0)}enterUnfinishedNodesBefore(t){return Xt(this,t)}toString(){return this.context.buffer.childString(this.index)}getChild(t,e=null,i=null){let s=gt(this,t,e,i);return s.length?s[0]:null}getChildren(t,e=null,i=null){return gt(this,t,e,i)}get node(){return this}matchContext(t){return mt(this,t)}}class kt{get name(){return this.type.name}constructor(t,e=0){if(this.mode=e,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,t instanceof U)this.yieldNode(t);else{this._tree=t.context.parent,this.buffer=t.context;for(let i=t._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=t,this.yieldBuf(t.index)}}yieldNode(t){return t?(this._tree=t,this.type=t.type,this.from=t.from,this.to=t.to,!0):!1}yieldBuf(t,e){this.index=t;let{start:i,buffer:s}=this.buffer;return this.type=e||s.set.types[s.buffer[t]],this.from=i+s.buffer[t+1],this.to=i+s.buffer[t+2],!0}yield(t){return t?t instanceof U?(this.buffer=null,this.yieldNode(t)):(this.buffer=t.context,this.yieldBuf(t.index,t.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(t,e,i){if(!this.buffer)return this.yield(this._tree.nextChild(t<0?this._tree._tree.children.length-1:0,t,e,i,this.mode));let{buffer:s}=this.buffer,n=s.findChild(this.index+4,s.buffer[this.index+3],t,e-this.buffer.start,i);return n<0?!1:(this.stack.push(this.index),this.yieldBuf(n))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(t){return this.enterChild(1,t,2)}childBefore(t){return this.enterChild(-1,t,-2)}enter(t,e,i=this.mode){return this.buffer?i&N.ExcludeBuffers?!1:this.enterChild(1,t,e):this.yield(this._tree.enter(t,e,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&N.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let t=this.mode&N.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(t)}sibling(t){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+t,t,0,4,this.mode)):!1;let{buffer:e}=this.buffer,i=this.stack.length-1;if(t<0){let s=i<0?0:this.stack[i]+4;if(this.index!=s)return this.yieldBuf(e.findChild(s,this.index,-1,0,4))}else{let s=e.buffer[this.index+3];if(s<(i<0?e.buffer.length:e.buffer[this.stack[i]+3]))return this.yieldBuf(s)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+t,t,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(t){let e,i,{buffer:s}=this;if(s){if(t>0){if(this.index<s.buffer.buffer.length)return!1}else for(let n=0;n<this.index;n++)if(s.buffer.buffer[n+3]<this.index)return!1;({index:e,parent:i}=s)}else({index:e,_parent:i}=this._tree);for(;i;{index:e,_parent:i}=i)if(e>-1)for(let n=e+t,r=t<0?-1:i._tree.children.length;n!=r;n+=t){let h=i._tree.children[n];if(this.mode&N.IncludeAnonymous||h instanceof K||!h.type.isAnonymous||Rt(h))return!1}return!0}move(t,e){if(e&&this.enterChild(t,0,4))return!0;for(;;){if(this.sibling(t))return!0;if(this.atLastNode(t)||!this.parent())return!1}}next(t=!0){return this.move(1,t)}prev(t=!0){return this.move(-1,t)}moveTo(t,e=0){for(;(this.from==this.to||(e<1?this.from>=t:this.from>t)||(e>-1?this.to<=t:this.to<t))&&this.parent(););for(;this.enterChild(1,t,e););return this}get node(){if(!this.buffer)return this._tree;let t=this.bufferNode,e=null,i=0;if(t&&t.context==this.buffer){t:for(let s=this.index,n=this.stack.length;n>=0;){for(let r=t;r;r=r._parent)if(r.index==s){if(s==this.index)return r;e=r,i=n+1;break t}s=this.stack[--n]}}for(let s=i;s<this.stack.length;s++)e=new X(this.buffer,e,this.stack[s]);return this.bufferNode=new X(this.buffer,e,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(t,e){for(let i=0;;){let s=!1;if(this.type.isAnonymous||t(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(s=!0)}for(;s&&e&&e(this),s=this.type.isAnonymous,!this.nextSibling();){if(!i)return;this.parent(),i--,s=!0}}}matchContext(t){if(!this.buffer)return mt(this.node,t);let{buffer:e}=this.buffer,{types:i}=e.set;for(let s=t.length-1,n=this.stack.length-1;s>=0;n--){if(n<0)return mt(this.node,t,s);let r=i[e.buffer[this.stack[n]]];if(!r.isAnonymous){if(t[s]&&t[s]!=r.name)return!1;s--}}return!0}}function Rt(l){return l.children.some(t=>t instanceof K||!t.type.isAnonymous||Rt(t))}function ee(l){var t;let{buffer:e,nodeSet:i,maxBufferLength:s=qt,reused:n=[],minRepeatType:r=i.types.length}=l,h=Array.isArray(e)?new zt(e,e.length):e,o=i.types,a=0,c=0;function u(O,w,m,b,v){let{id:y,start:x,end:P,size:A}=h,Q=c;for(;A<0;)if(h.next(),A==-1){let Z=n[y];m.push(Z),b.push(x-O);return}else if(A==-3){a=y;return}else if(A==-4){c=y;return}else throw new RangeError(`Unrecognized record size: ${A}`);let tt=o[y],G,F,Bt=x-O;if(P-x<=s&&(F=B(h.pos-w,v))){let Z=new Uint16Array(F.size-F.skip),M=h.pos-F.size,W=Z.length;for(;h.pos>M;)W=z(F.start,Z,W);G=new K(Z,P-F.start,i),Bt=F.start-O}else{let Z=h.pos-A;h.next();let M=[],W=[],Y=y>=r?y:-1,et=0,ht=P;for(;h.pos>Z;)Y>=0&&h.id==Y&&h.size>=0?(h.end<=ht-s&&(g(M,W,x,et,h.end,ht,Y,Q),et=M.length,ht=h.end),h.next()):u(x,Z,M,W,Y);if(Y>=0&&et>0&&et<M.length&&g(M,W,x,et,x,ht,Y,Q),M.reverse(),W.reverse(),Y>-1&&et>0){let Qt=p(tt);G=It(tt,M,W,0,M.length,0,P-x,Qt,Qt)}else G=k(tt,M,W,P-x,Q-P)}m.push(G),b.push(Bt)}function p(O){return(w,m,b)=>{let v=0,y=w.length-1,x,P;if(y>=0&&(x=w[y])instanceof T){if(!y&&x.type==O&&x.length==b)return x;(P=x.prop(S.lookAhead))&&(v=m[y]+x.length+P)}return k(O,w,m,b,v)}}function g(O,w,m,b,v,y,x,P){let A=[],Q=[];for(;O.length>b;)A.push(O.pop()),Q.push(w.pop()+m-v);O.push(k(i.types[x],A,Q,y-v,P-y)),w.push(v-m)}function k(O,w,m,b,v=0,y){if(a){let x=[S.contextHash,a];y=y?[x].concat(y):[x]}if(v>25){let x=[S.lookAhead,v];y=y?[x].concat(y):[x]}return new T(O,w,m,b,y)}function B(O,w){let m=h.fork(),b=0,v=0,y=0,x=m.end-s,P={size:0,start:0,skip:0};t:for(let A=m.pos-O;m.pos>A;){let Q=m.size;if(m.id==w&&Q>=0){P.size=b,P.start=v,P.skip=y,y+=4,b+=4,m.next();continue}let tt=m.pos-Q;if(Q<0||tt<A||m.start<x)break;let G=m.id>=r?4:0,F=m.start;for(m.next();m.pos>tt;){if(m.size<0)if(m.size==-3)G+=4;else break t;else m.id>=r&&(G+=4);m.next()}v=F,b+=Q,y+=G}return(w<0||b==O)&&(P.size=b,P.start=v,P.skip=y),P.size>4?P:void 0}function z(O,w,m){let{id:b,start:v,end:y,size:x}=h;if(h.next(),x>=0&&b<r){let P=m;if(x>4){let A=h.pos-(x-4);for(;h.pos>A;)m=z(O,w,m)}w[--m]=P,w[--m]=y-O,w[--m]=v-O,w[--m]=b}else x==-3?a=b:x==-4&&(c=b);return m}let R=[],I=[];for(;h.pos>0;)u(l.start||0,l.bufferStart||0,R,I,-1);let C=(t=l.length)!==null&&t!==void 0?t:R.length?I[0]+R[0].length:0;return new T(o[l.topID],R.reverse(),I.reverse(),C)}const _t=new WeakMap;function ct(l,t){if(!l.isAnonymous||t instanceof K||t.type!=l)return 1;let e=_t.get(t);if(e==null){e=1;for(let i of t.children){if(i.type!=l||!(i instanceof T)){e=1;break}e+=ct(l,i)}_t.set(t,e)}return e}function It(l,t,e,i,s,n,r,h,o){let a=0;for(let k=i;k<s;k++)a+=ct(l,t[k]);let c=Math.ceil(a*1.5/8),u=[],p=[];function g(k,B,z,R,I){for(let C=z;C<R;){let O=C,w=B[C],m=ct(l,k[C]);for(C++;C<R;C++){let b=ct(l,k[C]);if(m+b>=c)break;m+=b}if(C==O+1){if(m>c){let b=k[O];g(b.children,b.positions,0,b.children.length,B[O]+I);continue}u.push(k[O])}else{let b=B[C-1]+k[C-1].length-w;u.push(It(l,k,B,O,C,w,b,null,o))}p.push(w+I-n)}}return g(t,e,i,s,0),(h||o)(u,p,r)}class ie{startParse(t,e,i){return typeof t=="string"&&(t=new se(t)),i=i?i.length?i.map(s=>new Pt(s.from,s.to)):[new Pt(0,0)]:[new Pt(0,t.length)],this.createParse(t,e||[],i)}parse(t,e,i){let s=this.startParse(t,e,i);for(;;){let n=s.advance();if(n)return n}}}class se{constructor(t){this.string=t}get length(){return this.string.length}chunk(t){return this.string.slice(t)}get lineChunks(){return!1}read(t,e){return this.string.slice(t,e)}}new S({perNode:!0});let re=0;class E{constructor(t,e,i){this.set=t,this.base=e,this.modified=i,this.id=re++}static define(t){if(t!=null&&t.base)throw new Error("Can not derive from a modified tag");let e=new E([],null,[]);if(e.set.push(e),t)for(let i of t.set)e.set.push(i);return e}static defineModifier(){let t=new xt;return e=>e.modified.indexOf(t)>-1?e:xt.get(e.base||e,e.modified.concat(t).sort((i,s)=>i.id-s.id))}}let ne=0;class xt{constructor(){this.instances=[],this.id=ne++}static get(t,e){if(!e.length)return t;let i=e[0].instances.find(h=>h.base==t&&he(e,h.modified));if(i)return i;let s=[],n=new E(s,t,e);for(let h of e)h.instances.push(n);let r=le(e);for(let h of t.set)if(!h.modified.length)for(let o of r)s.push(xt.get(h,o));return n}}function he(l,t){return l.length==t.length&&l.every((e,i)=>e==t[i])}function le(l){let t=[[]];for(let e=0;e<l.length;e++)for(let i=0,s=t.length;i<s;i++)t.push(t[i].concat(l[e]));return t.sort((e,i)=>i.length-e.length)}function oe(l){let t=Object.create(null);for(let e in l){let i=l[e];Array.isArray(i)||(i=[i]);for(let s of e.split(" "))if(s){let n=[],r=2,h=s;for(let u=0;;){if(h=="..."&&u>0&&u+3==s.length){r=1;break}let p=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(h);if(!p)throw new RangeError("Invalid path: "+s);if(n.push(p[0]=="*"?"":p[0][0]=='"'?JSON.parse(p[0]):p[0]),u+=p[0].length,u==s.length)break;let g=s[u++];if(u==s.length&&g=="!"){r=0;break}if(g!="/")throw new RangeError("Invalid path: "+s);h=s.slice(u)}let o=n.length-1,a=n[o];if(!a)throw new RangeError("Invalid path: "+s);let c=new bt(i,r,o>0?n.slice(0,o):null);t[a]=c.sort(t[a])}}return Yt.add(t)}const Yt=new S;class bt{constructor(t,e,i,s){this.tags=t,this.mode=e,this.context=i,this.next=s}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(t){return!t||t.depth<this.depth?(this.next=t,this):(t.next=this.sort(t.next),t)}get depth(){return this.context?this.context.length:0}}bt.empty=new bt([],2,null);function ae(l,t){let e=Object.create(null);for(let n of l)if(!Array.isArray(n.tag))e[n.tag.id]=n.class;else for(let r of n.tag)e[r.id]=n.class;let{scope:i,all:s=null}=t||{};return{style:n=>{let r=s;for(let h of n)for(let o of h.set){let a=e[o.id];if(a){r=r?r+" "+a:a;break}}return r},scope:i}}function fe(l,t){let e=null;for(let i of l){let s=i.style(t);s&&(e=e?e+" "+s:s)}return e}function ue(l,t,e,i=0,s=l.length){let n=new ce(i,Array.isArray(t)?t:[t],e);n.highlightRange(l.cursor(),i,s,"",n.highlighters),n.flush(s)}class ce{constructor(t,e,i){this.at=t,this.highlighters=e,this.span=i,this.class=""}startSpan(t,e){e!=this.class&&(this.flush(t),t>this.at&&(this.at=t),this.class=e)}flush(t){t>this.at&&this.class&&this.span(this.at,t,this.class)}highlightRange(t,e,i,s,n){let{type:r,from:h,to:o}=t;if(h>=i||o<=e)return;r.isTop&&(n=this.highlighters.filter(g=>!g.scope||g.scope(r)));let a=s,c=pe(t)||bt.empty,u=fe(n,c.tags);if(u&&(a&&(a+=" "),a+=u,c.mode==1&&(s+=(s?" ":"")+u)),this.startSpan(t.from,a),c.opaque)return;let p=t.tree&&t.tree.prop(S.mounted);if(p&&p.overlay){let g=t.node.enter(p.overlay[0].from+h,1),k=this.highlighters.filter(z=>!z.scope||z.scope(p.tree.type)),B=t.firstChild();for(let z=0,R=h;;z++){let I=z<p.overlay.length?p.overlay[z]:null,C=I?I.from+h:o,O=Math.max(e,R),w=Math.min(i,C);if(O<w&&B)for(;t.from<w&&(this.highlightRange(t,O,w,s,n),this.startSpan(Math.min(w,t.to),a),!(t.to>=C||!t.nextSibling())););if(!I||C>i)break;R=I.to+h,R>e&&(this.highlightRange(g.cursor(),Math.max(e,I.from+h),Math.min(i,R),s,k),this.startSpan(R,a))}B&&t.parent()}else if(t.firstChild()){do if(!(t.to<=e)){if(t.from>=i)break;this.highlightRange(t,e,i,s,n),this.startSpan(Math.min(i,t.to),a)}while(t.nextSibling());t.parent()}}}function pe(l){let t=l.type.prop(Yt);for(;t&&t.context&&!l.matchContext(t.context);)t=t.next;return t||null}const f=E.define,ot=f(),q=f(),Dt=f(q),jt=f(q),H=f(),at=f(H),Ct=f(H),$=f(),J=f($),j=f(),L=f(),At=f(),rt=f(At),ft=f(),d={comment:ot,lineComment:f(ot),blockComment:f(ot),docComment:f(ot),name:q,variableName:f(q),typeName:Dt,tagName:f(Dt),propertyName:jt,attributeName:f(jt),className:f(q),labelName:f(q),namespace:f(q),macroName:f(q),literal:H,string:at,docString:f(at),character:f(at),attributeValue:f(at),number:Ct,integer:f(Ct),float:f(Ct),bool:f(H),regexp:f(H),escape:f(H),color:f(H),url:f(H),keyword:j,self:f(j),null:f(j),atom:f(j),unit:f(j),modifier:f(j),operatorKeyword:f(j),controlKeyword:f(j),definitionKeyword:f(j),moduleKeyword:f(j),operator:L,derefOperator:f(L),arithmeticOperator:f(L),logicOperator:f(L),bitwiseOperator:f(L),compareOperator:f(L),updateOperator:f(L),definitionOperator:f(L),typeOperator:f(L),controlOperator:f(L),punctuation:At,separator:f(At),bracket:rt,angleBracket:f(rt),squareBracket:f(rt),paren:f(rt),brace:f(rt),content:$,heading:J,heading1:f(J),heading2:f(J),heading3:f(J),heading4:f(J),heading5:f(J),heading6:f(J),contentSeparator:f($),list:f($),quote:f($),emphasis:f($),strong:f($),link:f($),monospace:f($),strikethrough:f($),inserted:f(),deleted:f(),changed:f(),invalid:f(),meta:ft,documentMeta:f(ft),annotation:f(ft),processingInstruction:f(ft),definition:E.defineModifier(),constant:E.defineModifier(),function:E.defineModifier(),standard:E.defineModifier(),local:E.defineModifier(),special:E.defineModifier()},de=ae([{tag:d.link,class:"tok-link"},{tag:d.heading,class:"tok-heading"},{tag:d.emphasis,class:"tok-emphasis"},{tag:d.strong,class:"tok-strong"},{tag:d.keyword,class:"tok-keyword"},{tag:d.atom,class:"tok-atom"},{tag:d.bool,class:"tok-bool"},{tag:d.url,class:"tok-url"},{tag:d.labelName,class:"tok-labelName"},{tag:d.inserted,class:"tok-inserted"},{tag:d.deleted,class:"tok-deleted"},{tag:d.literal,class:"tok-literal"},{tag:d.string,class:"tok-string"},{tag:d.number,class:"tok-number"},{tag:[d.regexp,d.escape,d.special(d.string)],class:"tok-string2"},{tag:d.variableName,class:"tok-variableName"},{tag:d.local(d.variableName),class:"tok-variableName tok-local"},{tag:d.definition(d.variableName),class:"tok-variableName tok-definition"},{tag:d.special(d.variableName),class:"tok-variableName2"},{tag:d.definition(d.propertyName),class:"tok-propertyName tok-definition"},{tag:d.typeName,class:"tok-typeName"},{tag:d.namespace,class:"tok-namespace"},{tag:d.className,class:"tok-className"},{tag:d.macroName,class:"tok-macroName"},{tag:d.propertyName,class:"tok-propertyName"},{tag:d.operator,class:"tok-operator"},{tag:d.comment,class:"tok-comment"},{tag:d.meta,class:"tok-meta"},{tag:d.invalid,class:"tok-invalid"},{tag:d.punctuation,class:"tok-punctuation"}]);class yt{constructor(t,e,i,s,n,r,h,o,a,c=0,u){this.p=t,this.stack=e,this.state=i,this.reducePos=s,this.pos=n,this.score=r,this.buffer=h,this.bufferBase=o,this.curContext=a,this.lookAhead=c,this.parent=u}toString(){return`[${this.stack.filter((t,e)=>e%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(t,e,i=0){let s=t.parser.context;return new yt(t,[],e,i,i,0,[],0,s?new Lt(s,s.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(t,e){this.stack.push(this.state,e,this.bufferBase+this.buffer.length),this.state=t}reduce(t){var e;let i=t>>19,s=t&65535,{parser:n}=this.p,r=n.dynamicPrecedence(s);if(r&&(this.score+=r),i==0){this.pushState(n.getGoto(this.state,s,!0),this.reducePos),s<n.minRepeatTerm&&this.storeNode(s,this.reducePos,this.reducePos,4,!0),this.reduceContext(s,this.reducePos);return}let h=this.stack.length-(i-1)*3-(t&262144?6:0),o=h?this.stack[h-2]:this.p.ranges[0].from,a=this.reducePos-o;a>=2e3&&!(!((e=this.p.parser.nodeSet.types[s])===null||e===void 0)&&e.isAnonymous)&&(o==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=a):this.p.lastBigReductionSize<a&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=o,this.p.lastBigReductionSize=a));let c=h?this.stack[h-1]:0,u=this.bufferBase+this.buffer.length-c;if(s<n.minRepeatTerm||t&131072){let p=n.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(s,o,p,u+4,!0)}if(t&262144)this.state=this.stack[h];else{let p=this.stack[h-3];this.state=n.getGoto(p,s,!0)}for(;this.stack.length>h;)this.stack.pop();this.reduceContext(s,o)}storeNode(t,e,i,s=4,n=!1){if(t==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let r=this,h=this.buffer.length;if(h==0&&r.parent&&(h=r.bufferBase-r.parent.bufferBase,r=r.parent),h>0&&r.buffer[h-4]==0&&r.buffer[h-1]>-1){if(e==i)return;if(r.buffer[h-2]>=e){r.buffer[h-2]=i;return}}}if(!n||this.pos==i)this.buffer.push(t,e,i,s);else{let r=this.buffer.length;if(r>0&&this.buffer[r-4]!=0)for(;r>0&&this.buffer[r-2]>i;)this.buffer[r]=this.buffer[r-4],this.buffer[r+1]=this.buffer[r-3],this.buffer[r+2]=this.buffer[r-2],this.buffer[r+3]=this.buffer[r-1],r-=4,s>4&&(s-=4);this.buffer[r]=t,this.buffer[r+1]=e,this.buffer[r+2]=i,this.buffer[r+3]=s}}shift(t,e,i){let s=this.pos;if(t&131072)this.pushState(t&65535,this.pos);else if(t&262144)this.pos=i,this.shiftContext(e,s),e<=this.p.parser.maxNode&&this.buffer.push(e,s,i,4);else{let n=t,{parser:r}=this.p;(i>this.pos||e<=r.maxNode)&&(this.pos=i,r.stateFlag(n,1)||(this.reducePos=i)),this.pushState(n,s),this.shiftContext(e,s),e<=r.maxNode&&this.buffer.push(e,s,i,4)}}apply(t,e,i){t&65536?this.reduce(t):this.shift(t,e,i)}useNode(t,e){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=t)&&(this.p.reused.push(t),i++);let s=this.pos;this.reducePos=this.pos=s+t.length,this.pushState(e,s),this.buffer.push(i,s,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,t,this,this.p.stream.reset(this.pos-t.length)))}split(){let t=this,e=t.buffer.length;for(;e>0&&t.buffer[e-2]>t.reducePos;)e-=4;let i=t.buffer.slice(e),s=t.bufferBase+e;for(;t&&s==t.bufferBase;)t=t.parent;return new yt(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,s,this.curContext,this.lookAhead,t)}recoverByDelete(t,e){let i=t<=this.p.parser.maxNode;i&&this.storeNode(t,this.pos,e,4),this.storeNode(0,this.pos,e,i?8:4),this.pos=this.reducePos=e,this.score-=190}canShift(t){for(let e=new ge(this);;){let i=this.p.parser.stateSlot(e.state,4)||this.p.parser.hasAction(e.state,t);if(i==0)return!1;if(!(i&65536))return!0;e.reduce(i)}}recoverByInsert(t){if(this.stack.length>=300)return[];let e=this.p.parser.nextStates(this.state);if(e.length>4<<1||this.stack.length>=120){let s=[];for(let n=0,r;n<e.length;n+=2)(r=e[n+1])!=this.state&&this.p.parser.hasAction(r,t)&&s.push(e[n],r);if(this.stack.length<120)for(let n=0;s.length<4<<1&&n<e.length;n+=2){let r=e[n+1];s.some((h,o)=>o&1&&h==r)||s.push(e[n],r)}e=s}let i=[];for(let s=0;s<e.length&&i.length<4;s+=2){let n=e[s+1];if(n==this.state)continue;let r=this.split();r.pushState(n,this.pos),r.storeNode(0,r.pos,r.pos,4,!0),r.shiftContext(e[s],this.pos),r.score-=200,i.push(r)}return i}forceReduce(){let t=this.p.parser.stateSlot(this.state,5);if(!(t&65536))return!1;let{parser:e}=this.p;if(!e.validAction(this.state,t)){let i=t>>19,s=t&65535,n=this.stack.length-i*3;if(n<0||e.getGoto(this.stack[n],s,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:t}=this.p;return t.data[t.stateSlot(this.state,1)]==65535&&!t.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(t){if(this.state!=t.state||this.stack.length!=t.stack.length)return!1;for(let e=0;e<this.stack.length;e+=3)if(this.stack[e]!=t.stack[e])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(t){return this.p.parser.dialect.flags[t]}shiftContext(t,e){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,t,this,this.p.stream.reset(e)))}reduceContext(t,e){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,t,this,this.p.stream.reset(e)))}emitContext(){let t=this.buffer.length-1;(t<0||this.buffer[t]!=-3)&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let t=this.buffer.length-1;(t<0||this.buffer[t]!=-4)&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(t){if(t!=this.curContext.context){let e=new Lt(this.curContext.tracker,t);e.hash!=this.curContext.hash&&this.emitContext(),this.curContext=e}}setLookAhead(t){t>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=t)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class Lt{constructor(t,e){this.tracker=t,this.context=e,this.hash=t.strict?t.hash(e):0}}var $t;(function(l){l[l.Insert=200]="Insert",l[l.Delete=190]="Delete",l[l.Reduce=100]="Reduce",l[l.MaxNext=4]="MaxNext",l[l.MaxInsertStackDepth=300]="MaxInsertStackDepth",l[l.DampenInsertStackDepth=120]="DampenInsertStackDepth",l[l.MinBigReduction=2e3]="MinBigReduction"})($t||($t={}));class ge{constructor(t){this.start=t,this.state=t.state,this.stack=t.stack,this.base=this.stack.length}reduce(t){let e=t&65535,i=t>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let s=this.start.p.parser.getGoto(this.stack[this.base-3],e,!0);this.state=s}}class Ot{constructor(t,e,i){this.stack=t,this.pos=e,this.index=i,this.buffer=t.buffer,this.index==0&&this.maybeNext()}static create(t,e=t.bufferBase+t.buffer.length){return new Ot(t,e,e-t.bufferBase)}maybeNext(){let t=this.stack.parent;t!=null&&(this.index=this.stack.bufferBase-t.bufferBase,this.stack=t,this.buffer=t.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new Ot(this.stack,this.pos,this.index)}}function ut(l,t=Uint16Array){if(typeof l!="string")return l;let e=null;for(let i=0,s=0;i<l.length;){let n=0;for(;;){let r=l.charCodeAt(i++),h=!1;if(r==126){n=65535;break}r>=92&&r--,r>=34&&r--;let o=r-32;if(o>=46&&(o-=46,h=!0),n+=o,h)break;n*=46}e?e[s++]=n:e=new t(n)}return e}class pt{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const Et=new pt;class me{constructor(t,e){this.input=t,this.ranges=e,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=Et,this.rangeIndex=0,this.pos=this.chunkPos=e[0].from,this.range=e[0],this.end=e[e.length-1].to,this.readNext()}resolveOffset(t,e){let i=this.range,s=this.rangeIndex,n=this.pos+t;for(;n<i.from;){if(!s)return null;let r=this.ranges[--s];n-=i.from-r.to,i=r}for(;e<0?n>i.to:n>=i.to;){if(s==this.ranges.length-1)return null;let r=this.ranges[++s];n+=r.from-i.to,i=r}return n}clipPos(t){if(t>=this.range.from&&t<this.range.to)return t;for(let e of this.ranges)if(e.to>t)return Math.max(t,e.from);return this.end}peek(t){let e=this.chunkOff+t,i,s;if(e>=0&&e<this.chunk.length)i=this.pos+t,s=this.chunk.charCodeAt(e);else{let n=this.resolveOffset(t,1);if(n==null)return-1;if(i=n,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)s=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let r=this.rangeIndex,h=this.range;for(;h.to<=i;)h=this.ranges[++r];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>h.to&&(this.chunk2=this.chunk2.slice(0,h.to-i)),s=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),s}acceptToken(t,e=0){let i=e?this.resolveOffset(e,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=t,this.token.end=i}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:t,chunkPos:e}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=t,this.chunk2Pos=e,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let t=this.input.chunk(this.pos),e=this.pos+t.length;this.chunk=e>this.range.to?t.slice(0,this.range.to-this.pos):t,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(t=1){for(this.chunkOff+=t;this.pos+t>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();t-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=t,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(t,e){if(e?(this.token=e,e.start=t,e.lookAhead=t+1,e.value=e.extended=-1):this.token=Et,this.pos!=t){if(this.pos=t,t==this.end)return this.setDone(),this;for(;t<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;t>=this.range.to;)this.range=this.ranges[++this.rangeIndex];t>=this.chunkPos&&t<this.chunkPos+this.chunk.length?this.chunkOff=t-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(t,e){if(t>=this.chunkPos&&e<=this.chunkPos+this.chunk.length)return this.chunk.slice(t-this.chunkPos,e-this.chunkPos);if(t>=this.chunk2Pos&&e<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(t-this.chunk2Pos,e-this.chunk2Pos);if(t>=this.range.from&&e<=this.range.to)return this.input.read(t,e);let i="";for(let s of this.ranges){if(s.from>=e)break;s.to>t&&(i+=this.input.read(Math.max(s.from,t),Math.min(s.to,e)))}return i}}class it{constructor(t,e){this.data=t,this.id=e}token(t,e){let{parser:i}=e.p;ke(this.data,t,e,this.id,i.data,i.tokenPrecTable)}}it.prototype.contextual=it.prototype.fallback=it.prototype.extend=!1;it.prototype.fallback=it.prototype.extend=!1;function ke(l,t,e,i,s,n){let r=0,h=1<<i,{dialect:o}=e.p.parser;t:for(;h&l[r];){let a=l[r+1];for(let g=r+3;g<a;g+=2)if((l[g+1]&h)>0){let k=l[g];if(o.allows(k)&&(t.token.value==-1||t.token.value==k||xe(k,t.token.value,s,n))){t.acceptToken(k);break}}let c=t.next,u=0,p=l[r+2];if(t.next<0&&p>u&&l[a+p*3-3]==65535&&l[a+p*3-3]==65535){r=l[a+p*3-1];continue t}for(;u<p;){let g=u+p>>1,k=a+g+(g<<1),B=l[k],z=l[k+1]||65536;if(c<B)p=g;else if(c>=z)u=g+1;else{r=l[k+2],t.advance();continue t}}break}}function Ft(l,t,e){for(let i=t,s;(s=l[i])!=65535;i++)if(s==e)return i-t;return-1}function xe(l,t,e,i){let s=Ft(e,i,t);return s<0||Ft(e,i,l)<s}const _=typeof process<"u"&&process.env&&/\bparse\b/.test({}.LOG);let vt=null;var Wt;(function(l){l[l.Margin=25]="Margin"})(Wt||(Wt={}));function Vt(l,t,e){let i=l.cursor(N.IncludeAnonymous);for(i.moveTo(t);;)if(!(e<0?i.childBefore(t):i.childAfter(t)))for(;;){if((e<0?i.to<t:i.from>t)&&!i.type.isError)return e<0?Math.max(0,Math.min(i.to-1,t-25)):Math.min(l.length,Math.max(i.from+1,t+25));if(e<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return e<0?0:l.length}}class be{constructor(t,e){this.fragments=t,this.nodeSet=e,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let t=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(t){for(this.safeFrom=t.openStart?Vt(t.tree,t.from+t.offset,1)-t.offset:t.from,this.safeTo=t.openEnd?Vt(t.tree,t.to+t.offset,-1)-t.offset:t.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(t.tree),this.start.push(-t.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(t){if(t<this.nextStart)return null;for(;this.fragment&&this.safeTo<=t;)this.nextFragment();if(!this.fragment)return null;for(;;){let e=this.trees.length-1;if(e<0)return this.nextFragment(),null;let i=this.trees[e],s=this.index[e];if(s==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let n=i.children[s],r=this.start[e]+i.positions[s];if(r>t)return this.nextStart=r,null;if(n instanceof T){if(r==t){if(r<this.safeFrom)return null;let h=r+n.length;if(h<=this.safeTo){let o=n.prop(S.lookAhead);if(!o||h+o<this.fragment.to)return n}}this.index[e]++,r+n.length>=Math.max(this.safeFrom,t)&&(this.trees.push(n),this.start.push(r),this.index.push(0))}else this.index[e]++,this.nextStart=r+n.length}}}class ye{constructor(t,e){this.stream=e,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=t.tokenizers.map(i=>new pt)}getActions(t){let e=0,i=null,{parser:s}=t.p,{tokenizers:n}=s,r=s.stateSlot(t.state,3),h=t.curContext?t.curContext.hash:0,o=0;for(let a=0;a<n.length;a++){if(!(1<<a&r))continue;let c=n[a],u=this.tokens[a];if(!(i&&!c.fallback)&&((c.contextual||u.start!=t.pos||u.mask!=r||u.context!=h)&&(this.updateCachedToken(u,c,t),u.mask=r,u.context=h),u.lookAhead>u.end+25&&(o=Math.max(u.lookAhead,o)),u.value!=0)){let p=e;if(u.extended>-1&&(e=this.addActions(t,u.extended,u.end,e)),e=this.addActions(t,u.value,u.end,e),!c.extend&&(i=u,e>p))break}}for(;this.actions.length>e;)this.actions.pop();return o&&t.setLookAhead(o),!i&&t.pos==this.stream.end&&(i=new pt,i.value=t.p.parser.eofTerm,i.start=i.end=t.pos,e=this.addActions(t,i.value,i.end,e)),this.mainToken=i,this.actions}getMainToken(t){if(this.mainToken)return this.mainToken;let e=new pt,{pos:i,p:s}=t;return e.start=i,e.end=Math.min(i+1,s.stream.end),e.value=i==s.stream.end?s.parser.eofTerm:0,e}updateCachedToken(t,e,i){let s=this.stream.clipPos(i.pos);if(e.token(this.stream.reset(s,t),i),t.value>-1){let{parser:n}=i.p;for(let r=0;r<n.specialized.length;r++)if(n.specialized[r]==t.value){let h=n.specializers[r](this.stream.read(t.start,t.end),i);if(h>=0&&i.p.parser.dialect.allows(h>>1)){h&1?t.extended=h>>1:t.value=h>>1;break}}}else t.value=0,t.end=this.stream.clipPos(s+1)}putAction(t,e,i,s){for(let n=0;n<s;n+=3)if(this.actions[n]==t)return s;return this.actions[s++]=t,this.actions[s++]=e,this.actions[s++]=i,s}addActions(t,e,i,s){let{state:n}=t,{parser:r}=t.p,{data:h}=r;for(let o=0;o<2;o++)for(let a=r.stateSlot(n,o?2:1);;a+=3){if(h[a]==65535)if(h[a+1]==1)a=V(h,a+2);else{s==0&&h[a+1]==2&&(s=this.putAction(V(h,a+2),e,i,s));break}h[a]==e&&(s=this.putAction(V(h,a+1),e,i,s))}return s}}var Ut;(function(l){l[l.Distance=5]="Distance",l[l.MaxRemainingPerStep=3]="MaxRemainingPerStep",l[l.MinBufferLengthPrune=500]="MinBufferLengthPrune",l[l.ForceReduceLimit=10]="ForceReduceLimit",l[l.CutDepth=15e3]="CutDepth",l[l.CutTo=9e3]="CutTo",l[l.MaxLeftAssociativeReductionCount=300]="MaxLeftAssociativeReductionCount",l[l.MaxStackCount=12]="MaxStackCount"})(Ut||(Ut={}));class Oe{constructor(t,e,i,s){this.parser=t,this.input=e,this.ranges=s,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new me(e,s),this.tokens=new ye(t,this.stream),this.topTerm=t.top[1];let{from:n}=s[0];this.stacks=[yt.start(this,t.top[0],n)],this.fragments=i.length&&this.stream.end-n>t.bufferLength*4?new be(i,t.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let t=this.stacks,e=this.minStackPos,i=this.stacks=[],s,n;if(this.bigReductionCount>300&&t.length==1){let[r]=t;for(;r.forceReduce()&&r.stack.length&&r.stack[r.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let r=0;r<t.length;r++){let h=t[r];for(;;){if(this.tokens.mainToken=null,h.pos>e)i.push(h);else{if(this.advanceStack(h,i,t))continue;{s||(s=[],n=[]),s.push(h);let o=this.tokens.getMainToken(h);n.push(o.value,o.end)}}break}}if(!i.length){let r=s&&Se(s);if(r)return this.stackToTree(r);if(this.parser.strict)throw _&&s&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+e);this.recovering||(this.recovering=5)}if(this.recovering&&s){let r=this.stoppedAt!=null&&s[0].pos>this.stoppedAt?s[0]:this.runRecovery(s,n,i);if(r)return this.stackToTree(r.forceAll())}if(this.recovering){let r=this.recovering==1?1:this.recovering*3;if(i.length>r)for(i.sort((h,o)=>o.score-h.score);i.length>r;)i.pop();i.some(h=>h.reducePos>e)&&this.recovering--}else if(i.length>1){t:for(let r=0;r<i.length-1;r++){let h=i[r];for(let o=r+1;o<i.length;o++){let a=i[o];if(h.sameState(a)||h.buffer.length>500&&a.buffer.length>500)if((h.score-a.score||h.buffer.length-a.buffer.length)>0)i.splice(o--,1);else{i.splice(r--,1);continue t}}}i.length>12&&i.splice(12,i.length-12)}this.minStackPos=i[0].pos;for(let r=1;r<i.length;r++)i[r].pos<this.minStackPos&&(this.minStackPos=i[r].pos);return null}stopAt(t){if(this.stoppedAt!=null&&this.stoppedAt<t)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=t}advanceStack(t,e,i){let s=t.pos,{parser:n}=this,r=_?this.stackID(t)+" -> ":"";if(this.stoppedAt!=null&&s>this.stoppedAt)return t.forceReduce()?t:null;if(this.fragments){let a=t.curContext&&t.curContext.tracker.strict,c=a?t.curContext.hash:0;for(let u=this.fragments.nodeAt(s);u;){let p=this.parser.nodeSet.types[u.type.id]==u.type?n.getGoto(t.state,u.type.id):-1;if(p>-1&&u.length&&(!a||(u.prop(S.contextHash)||0)==c))return t.useNode(u,p),_&&console.log(r+this.stackID(t)+` (via reuse of ${n.getName(u.type.id)})`),!0;if(!(u instanceof T)||u.children.length==0||u.positions[0]>0)break;let g=u.children[0];if(g instanceof T&&u.positions[0]==0)u=g;else break}}let h=n.stateSlot(t.state,4);if(h>0)return t.reduce(h),_&&console.log(r+this.stackID(t)+` (via always-reduce ${n.getName(h&65535)})`),!0;if(t.stack.length>=15e3)for(;t.stack.length>9e3&&t.forceReduce(););let o=this.tokens.getActions(t);for(let a=0;a<o.length;){let c=o[a++],u=o[a++],p=o[a++],g=a==o.length||!i,k=g?t:t.split();if(k.apply(c,u,p),_&&console.log(r+this.stackID(k)+` (via ${c&65536?`reduce of ${n.getName(c&65535)}`:"shift"} for ${n.getName(u)} @ ${s}${k==t?"":", split"})`),g)return!0;k.pos>s?e.push(k):i.push(k)}return!1}advanceFully(t,e){let i=t.pos;for(;;){if(!this.advanceStack(t,null,null))return!1;if(t.pos>i)return Gt(t,e),!0}}runRecovery(t,e,i){let s=null,n=!1;for(let r=0;r<t.length;r++){let h=t[r],o=e[r<<1],a=e[(r<<1)+1],c=_?this.stackID(h)+" -> ":"";if(h.deadEnd&&(n||(n=!0,h.restart(),_&&console.log(c+this.stackID(h)+" (restarted)"),this.advanceFully(h,i))))continue;let u=h.split(),p=c;for(let g=0;u.forceReduce()&&g<10&&(_&&console.log(p+this.stackID(u)+" (via force-reduce)"),!this.advanceFully(u,i));g++)_&&(p=this.stackID(u)+" -> ");for(let g of h.recoverByInsert(o))_&&console.log(c+this.stackID(g)+" (via recover-insert)"),this.advanceFully(g,i);this.stream.end>h.pos?(a==h.pos&&(a++,o=0),h.recoverByDelete(o,a),_&&console.log(c+this.stackID(h)+` (via recover-delete ${this.parser.getName(o)})`),Gt(h,i)):(!s||s.score<h.score)&&(s=h)}return s}stackToTree(t){return t.close(),T.build({buffer:Ot.create(t),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:t.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(t){let e=(vt||(vt=new WeakMap)).get(t);return e||vt.set(t,e=String.fromCodePoint(this.nextStackID++)),e+t}}function Gt(l,t){for(let e=0;e<t.length;e++){let i=t[e];if(i.pos==l.pos&&i.sameState(l)){t[e].score<l.score&&(t[e]=l);return}}t.push(l)}class we{constructor(t,e,i){this.source=t,this.flags=e,this.disabled=i}allows(t){return!this.disabled||this.disabled[t]==0}}class wt extends ie{constructor(t){if(super(),this.wrappers=[],t.version!=14)throw new RangeError(`Parser version (${t.version}) doesn't match runtime version (${14})`);let e=t.nodeNames.split(" ");this.minRepeatTerm=e.length;for(let h=0;h<t.repeatNodeCount;h++)e.push("");let i=Object.keys(t.topRules).map(h=>t.topRules[h][1]),s=[];for(let h=0;h<e.length;h++)s.push([]);function n(h,o,a){s[h].push([o,o.deserialize(String(a))])}if(t.nodeProps)for(let h of t.nodeProps){let o=h[0];typeof o=="string"&&(o=S[o]);for(let a=1;a<h.length;){let c=h[a++];if(c>=0)n(c,o,h[a++]);else{let u=h[a+-c];for(let p=-c;p>0;p--)n(h[a++],o,u);a++}}}this.nodeSet=new Tt(e.map((h,o)=>D.define({name:o>=this.minRepeatTerm?void 0:h,id:o,props:s[o],top:i.indexOf(o)>-1,error:o==0,skipped:t.skippedNodes&&t.skippedNodes.indexOf(o)>-1}))),t.propSources&&(this.nodeSet=this.nodeSet.extend(...t.propSources)),this.strict=!1,this.bufferLength=qt;let r=ut(t.tokenData);this.context=t.context,this.specializerSpecs=t.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let h=0;h<this.specializerSpecs.length;h++)this.specialized[h]=this.specializerSpecs[h].term;this.specializers=this.specializerSpecs.map(Zt),this.states=ut(t.states,Uint32Array),this.data=ut(t.stateData),this.goto=ut(t.goto),this.maxTerm=t.maxTerm,this.tokenizers=t.tokenizers.map(h=>typeof h=="number"?new it(r,h):h),this.topRules=t.topRules,this.dialects=t.dialects||{},this.dynamicPrecedences=t.dynamicPrecedences||null,this.tokenPrecTable=t.tokenPrec,this.termNames=t.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(t,e,i){let s=new Oe(this,t,e,i);for(let n of this.wrappers)s=n(s,t,e,i);return s}getGoto(t,e,i=!1){let s=this.goto;if(e>=s[0])return-1;for(let n=s[e+1];;){let r=s[n++],h=r&1,o=s[n++];if(h&&i)return o;for(let a=n+(r>>1);n<a;n++)if(s[n]==t)return o;if(h)return-1}}hasAction(t,e){let i=this.data;for(let s=0;s<2;s++)for(let n=this.stateSlot(t,s?2:1),r;;n+=3){if((r=i[n])==65535)if(i[n+1]==1)r=i[n=V(i,n+2)];else{if(i[n+1]==2)return V(i,n+2);break}if(r==e||r==0)return V(i,n+1)}return 0}stateSlot(t,e){return this.states[t*6+e]}stateFlag(t,e){return(this.stateSlot(t,0)&e)>0}validAction(t,e){if(e==this.stateSlot(t,4))return!0;for(let i=this.stateSlot(t,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=V(this.data,i+2);else return!1;if(e==V(this.data,i+1))return!0}}nextStates(t){let e=[];for(let i=this.stateSlot(t,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=V(this.data,i+2);else break;if(!(this.data[i+2]&1)){let s=this.data[i+1];e.some((n,r)=>r&1&&n==s)||e.push(this.data[i],s)}}return e}configure(t){let e=Object.assign(Object.create(wt.prototype),this);if(t.props&&(e.nodeSet=this.nodeSet.extend(...t.props)),t.top){let i=this.topRules[t.top];if(!i)throw new RangeError(`Invalid top rule name ${t.top}`);e.top=i}return t.tokenizers&&(e.tokenizers=this.tokenizers.map(i=>{let s=t.tokenizers.find(n=>n.from==i);return s?s.to:i})),t.specializers&&(e.specializers=this.specializers.slice(),e.specializerSpecs=this.specializerSpecs.map((i,s)=>{let n=t.specializers.find(h=>h.from==i.external);if(!n)return i;let r=Object.assign(Object.assign({},i),{external:n.to});return e.specializers[s]=Zt(r),r})),t.contextTracker&&(e.context=t.contextTracker),t.dialect&&(e.dialect=this.parseDialect(t.dialect)),t.strict!=null&&(e.strict=t.strict),t.wrap&&(e.wrappers=e.wrappers.concat(t.wrap)),t.bufferLength!=null&&(e.bufferLength=t.bufferLength),e}hasWrappers(){return this.wrappers.length>0}getName(t){return this.termNames?this.termNames[t]:String(t<=this.maxNode&&this.nodeSet.types[t].name||t)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(t){let e=this.dynamicPrecedences;return e==null?0:e[t]||0}parseDialect(t){let e=Object.keys(this.dialects),i=e.map(()=>!1);if(t)for(let n of t.split(" ")){let r=e.indexOf(n);r>=0&&(i[r]=!0)}let s=null;for(let n=0;n<e.length;n++)if(!i[n])for(let r=this.dialects[e[n]],h;(h=this.data[r++])!=65535;)(s||(s=new Uint8Array(this.maxTerm+1)))[h]=1;return new we(t,i,s)}static deserialize(t){return new wt(t)}}function V(l,t){return l[t]|l[t+1]<<16}function Se(l){let t=null;for(let e of l){let i=e.p.stoppedAt;(e.pos==e.p.stream.end||i!=null&&e.pos>i)&&e.p.parser.stateFlag(e.state,2)&&(!t||t.score<e.score)&&(t=e)}return t}function Zt(l){if(l.external){let t=l.extend?1:0;return(e,i)=>l.external(e,i)<<1|t}return l.get}const Pe=oe({String:d.string,Number:d.number,"True False":d.bool,PropertyName:d.propertyName,Null:d.null,",":d.separator,"[ ]":d.squareBracket,"{ }":d.brace}),Ce=wt.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#CjOOQO'#Cp'#CpQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CrOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59U,59UO!iQPO,59UOVQPO,59QOqQPO'#CkO!nQPO,59^OOQO1G.k1G.kOVQPO'#ClO!vQPO,59aOOQO1G.p1G.pOOQO1G.l1G.lOOQO,59V,59VOOQO-E6i-E6iOOQO,59W,59WOOQO-E6j-E6j",stateData:"#O~OcOS~OQSORSOSSOTSOWQO]ROePO~OVXOeUO~O[[O~PVOg^O~Oh_OVfX~OVaO~OhbO[iX~O[dO~Oh_OVfa~OhbO[ia~O",goto:"!kjPPPPPPkPPkqwPPk{!RPPP!XP!ePP!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:"⚠ JsonText True False Null Number String } { Object Property PropertyName ] [ Array",maxTerm:25,nodeProps:[["openedBy",7,"{",12,"["],["closedBy",8,"}",13,"]"]],propSources:[Pe],skippedNodes:[0],repeatNodeCount:2,tokenData:"(|~RaXY!WYZ!W]^!Wpq!Wrs!]|}$u}!O$z!Q!R%T!R![&c![!]&t!}#O&y#P#Q'O#Y#Z'T#b#c'r#h#i(Z#o#p(r#q#r(w~!]Oc~~!`Wpq!]qr!]rs!xs#O!]#O#P!}#P;'S!];'S;=`$o<%lO!]~!}Oe~~#QXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#m~#pR!Q![#y!c!i#y#T#Z#y~#|R!Q![$V!c!i$V#T#Z$V~$YR!Q![$c!c!i$c#T#Z$c~$fR!Q![!]!c!i!]#T#Z!]~$rP;=`<%l!]~$zOh~~$}Q!Q!R%T!R![&c~%YRT~!O!P%c!g!h%w#X#Y%w~%fP!Q![%i~%nRT~!Q![%i!g!h%w#X#Y%w~%zR{|&T}!O&T!Q![&Z~&WP!Q![&Z~&`PT~!Q![&Z~&hST~!O!P%c!Q![&c!g!h%w#X#Y%w~&yOg~~'OO]~~'TO[~~'WP#T#U'Z~'^P#`#a'a~'dP#g#h'g~'jP#X#Y'm~'rOR~~'uP#i#j'x~'{P#`#a(O~(RP#`#a(U~(ZOS~~(^P#f#g(a~(dP#i#j(g~(jP#X#Y(m~(rOQ~~(wOW~~(|OV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0}),dt='{"test": "hi"}',nt=Ce.parse(dt);console.log("result",nt);const St=[];let Nt=0;ue(nt,de,(l,t,e)=>{Nt<l&&St.push(dt.slice(Nt,l)),St.push(`<span class="${e}">${dt.slice(l,t)}</span>`);const i=dt.slice(l,t);console.log("token",i),console.log("from",l),console.log("to",t),console.log("classes",e),Nt=t});console.log("outputHTML",St.join(""));document.querySelector("#content").innerHTML=St.join("");console.log("tree2",nt);const ve=nt.cursor();console.log("curs",ve);const Ne=nt.topNode;console.log("syntaxNode",Ne.firstChild);
